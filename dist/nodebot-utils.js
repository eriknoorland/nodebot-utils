import e from"events";import t from"fs";const n=(e,t)=>{const{x:n,y:o}=e,{x:r,y:a}=t;return Math.atan2(a-o,r-n)};var o=Object.freeze({__proto__:null,calculateAngleBetweenCoordinates:n,calculateDistance:(e,t)=>{const{x:n,y:o}=e,{x:r,y:a}=t;return Math.sqrt(Math.pow(r-n,2)+Math.pow(a-o,2))},constrain:(e,t,n)=>Math.min(Math.max(e,t),n),deg2rad:e=>e/(180/Math.PI),fixedDecimals:(e,t)=>Number(e.toFixed(t)),getHeadingFromPoseToCoordinate:(e,t)=>{const o=n(e,t)-e.phi;return o>Math.PI?Number((-1*(2*Math.PI-o)).toFixed(4)):o<-Math.PI?Number((-1*(2*-Math.PI-o)).toFixed(4)):Number(o.toFixed(4))},getRelativeAngleDifference:(e,t)=>(e-t+(2*Math.PI+Math.PI))%(2*Math.PI)-Math.PI,map:(e,t,n,o,r)=>(e-t)*(r-o)/(n-t)+o,numberInRange:(e,t,n)=>e>=t&&e<=n,numberToByteArray:(e,t)=>{const n=new Array(t);let o=e;for(let e=n.length-1;e>=0;e-=1){const t=255&o;n[e]=t,o=(o-t)/256}return n},numberToHex:e=>`0x${`00${e.toString(16)}`.substr(-2).toUpperCase()}`,parseDecToBinary:e=>`000000000${e.toString(2)}`.substr(-8),rad2deg:e=>e*(180/Math.PI),speedToTickSpeed:(e,t,n)=>e/t/(1e3/n),tickSpeedToSpeed:(e,t,n)=>e*(1e3/n)*t});var r=Object.freeze({__proto__:null,getLongestDistance:e=>e.reduce(((e,t)=>t.distance>e.distance?t:e),e[0]),getShortestDistance:e=>e.reduce(((e,t)=>t.distance<e.distance?t:e),e[0]),isWithinDistance:(e,t,n)=>new Promise((o=>{let r=0;const a=({quality:s,angle:i,distance:c})=>{s>10&&Math.floor(i)===n&&c>0&&c<=t&&(r+=1,r%2==0&&(e.off("data",a),o()))};e.on("data",a)})),normalizeAngle:e=>e>=360?e%360:e<0?e+360:e});var a=Object.freeze({__proto__:null,countdown:t=>{const n=new e;return{start:function(){let e=t;return n.emit("count",e/1e3),new Promise((t=>{const o=setInterval((()=>{e-=1e3,n.emit("count",e/1e3),e<=0&&(clearInterval(o),t())}),1e3)}))},on:n.on.bind(n),off:n.off.bind(n)}},pause:(e=1e3)=>new Promise((t=>{setTimeout(t,e)}))});const s={cmd:"[37m%s[0m",html:"#fff"},i={cmd:"[36m%s[0m",html:"#0ff"},c={cmd:"[32m%s[0m",html:"#0f0"},l={cmd:"[33m%s[0m",html:"#ff0"},u={cmd:"[31m%s[0m",html:"#f00"};var m=Object.freeze({__proto__:null,default:e=>{const n=[];let o=null;function r(t,o){n.push(`<span style="color: ${o.html};">${t}</span>`),e.emit("log",n.join(",")),console.log(o.cmd,t)}function a(){const e=new Date;return`${e.getFullYear()}-${`0${e.getMonth()+1}`.slice(-2)}-${`0${e.getDate()}`.slice(-2)}T${`0${e.getHours()}`.slice(-2)}:${`0${e.getMinutes()}`.slice(-2)}:${`0${e.getSeconds()}`.slice(-2)}`}return Object.freeze({log:function(e){r(e,s)},success:function(e){r(e,c)},info:function(e){r(e,i)},warn:function(e){r(e,l)},error:function(e){r(e,u)},create:function(e){o={timestamp:a(),program:e,entries:[]}},event:function(e){o&&o.entries.push({type:"event",timestamp:a(),value:e})},data:function(e,t){o&&o.entries.push({type:"data",dataType:t,timestamp:a(),value:e})},save:function(e){return o?new Promise((n=>{const r=null==o?void 0:o.program.toLowerCase().split(" ").join("-"),s=`${a()}_${r}.json`,i=`${e}/${s}`,c=JSON.stringify(o);t.writeFile(i,c,"utf8",(()=>{o=null,n()}))})):Promise.resolve()}})}});export{r as lidar,m as logger,o as math,a as utils};
